<ion-header no-border>
    <ion-toolbar>
        <ion-buttons slot="end">
            <ion-button (click)="mostrarQr()">
                <ion-icon color="primary" slot="icon-only" name="barcode"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content class="background">
    <div class="scan-icon">
        <ion-button (click)="mostrarQr()">
            <ion-icon fill="clear" color="light" slot="icon-only" name="barcode"></ion-icon>
        </ion-button>
    </div>
    <div *ngIf="productos">
        <ion-img class="foto" [src]="productos[0].foto"></ion-img>
    </div>
    <ion-grid fixed>
        <ion-row *ngFor="let prod of productos; let i = index">
            <ion-col size="12">
                <ion-card style="--background: white">
                    <ion-row>
                        <ion-col size="8">
                            <ion-item lines="none">
                                <ion-row>
                                    <ion-col size="12">
                                        <ion-label class="ion-text-wrap">
                                            <h2 style="color:var(--ion-color-primary);">{{prod.nombre}}</h2>
                                            <h5>{{prod.precio | currency:'CAD':'symbol-narrow':'1.0-2'}} / {{prod.unidad}}</h5>
                                        </ion-label>
                                    </ion-col>
                                    <ion-col size="12">
                                        <div>
                                            <ng-container *ngIf="!prod.cantidad; else botones">
                                                <ion-button expand="block" (click)="agregar(i)" class="boton-add" color="primary" size="small">
                                                    Agregar
                                                </ion-button>
                                            </ng-container>
                                            <ng-template #botones>
                                                <ion-button expand="block" class="boton-add" color="primary" size="small">
                                                    <ion-grid fixed class="ion-no-padding">
                                                        <ion-row class="ion-no-padding">
                                                            <ion-col class="ion-no-padding ion-align-self-center" size="3" (click)="quitar(i)">
                                                                -
                                                            </ion-col>
                                                            <ion-col class="ion-no-padding ion-align-self-center" size="6">
                                                                <ion-input readonly="true" class="inpu" type="number" [(ngModel)]="prod.cantidad"></ion-input>
                                                            </ion-col>

                                                            <ion-col class="ion-no-padding ion-align-self-center" size="3" (click)="sumar(i)">
                                                                <strong>+</strong>
                                                            </ion-col>
                                                        </ion-row>
                                                    </ion-grid>
                                                </ion-button>
                                            </ng-template>
                                        </div>
                                    </ion-col>
                                </ion-row>
                            </ion-item>
                        </ion-col>
                        <ion-col size="4">
                            <img [src]="prod.foto" style="width: 80%; margin-left: 10%"> <br>
                        </ion-col>
                    </ion-row>
                </ion-card>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>

<ion-footer no-border>
    <ion-toolbar>
        <div class="div-precio">
            <div class="precio">
                {{cuenta | currency:'CAD':'symbol-narrow':'1.0-2'}}
            </div>
        </div>
        <ion-button [disabled]="cuenta === 0" color="primary" shape="round" expand="block" (click)="verMapa()">
            Hacer pedido
        </ion-button>
    </ion-toolbar>
</ion-footer>