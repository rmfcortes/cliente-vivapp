<ion-header>
    <ion-toolbar>
        <ion-title>pedido</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <div style="position: relative; height: 100%; width: 100%;">
        <agm-map style="height: 100vh" [latitude]="direccion.lat" [longitude]="direccion.lng" [disableDefaultUI]="true" [streetViewControl]="false" [zoom]="zoom" [zoomControl]="false" [fitBounds]="true">
            <agm-marker [agmFitBounds]="true" *ngIf="dirReady" [iconUrl]='{"url": icon,"scaledSize": {"height": 75, "width": 50}}' [latitude]="direccion.lat" [longitude]="direccion.lng" [animation]="'DROP'"></agm-marker>
            <agm-marker [agmFitBounds]="true" *ngIf="choferReady" [iconUrl]='{"url": truck,"scaledSize": {"height": 75, "width": 50}}' [latitude]="chofer.lat" [longitude]="chofer.lng" [animation]="'DROP'"></agm-marker>
        </agm-map>
        <div class="cuadro">
            <ng-container *ngIf="!choferReady; else repaTemplate">
                <ion-item lines="none">
                    <ion-spinner style="margin: auto" color="primary" name="bubbles"></ion-spinner>
                </ion-item>
                <ion-item lines="none" style="text-align: center">
                    <ion-label>
                        <h2>Asignando repartidor</h2>
                        <p class="ion-text-wrap">Por favor espere mientras encontramos el repartidor m√°s cercano</p>
                    </ion-label>
                </ion-item>
            </ng-container>
            <ng-template #repaTemplate>
                <div style="width: 100%; height: 100%;">
                    <ion-item lines="none" style="margin-top: 1rem">
                        <ion-avatar slot="start">
                            <img [src]="chofer.foto" />
                        </ion-avatar>
                        <ion-label>
                            <h2>{{chofer.nombre}}</h2>
                        </ion-label>
                    </ion-item>
                    <ion-item lines="none">
                        <ion-button slot="end">
                            Llamar
                        </ion-button>
                    </ion-item>
                </div>
            </ng-template>
        </div>
    </div>
</ion-content>